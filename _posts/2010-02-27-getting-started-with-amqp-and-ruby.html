--- 
layout: post
title: Getting started with AMQP and Ruby
published: true
---
OK so I want to see the most simple basic example of using a message <br />queue from Ruby. <p /> Install the rabbitmq server and the amqp ruby bindings. <p /> [code] 
brew install rabbitmq 
sudo gem install amqp 
sudo gem install carrot 
[/code] <p /> (I use homebrew <a href="http://github.com/mxcl/homebrew">http://github.com/mxcl/homebrew</a> for package management on OSX.) <p /> Now start the server. <p /> [code] 
rabbitmq-server 
[/code] <p /> Create a server.rb that handles the messages. <p /> <script src="https://gist.github.com/316931.js"></script><p /> This server is pretty basic it handles the messages and prints them <br />out as it gets them. <p /> Now lets create a client.rb that sends messages to the queue. <p /> <script src="https://gist.github.com/316937.js"></script><p /> Note that I used the 'carrot' library. Carrot makes it easy for me to <br />publish to asynchronous queues from synchronous processes like Sinatra <br />or Rails. <p /> Now run the server in one terminal. <p /> [code] 
ruby server.rb 
[/code] <p /> And run the client in another window. <p /> [code] 
ruby client.rb 
[/code] <p /> You should see this show up in the terminal where you ran server.rb : <p /> [code] 
Message number 0 
Message number 1 
Message number 2 
Message number 3 
Message number 4 
Message number 5 
Message number 6 
Message number 7 
Message number 8 
Message number 9 
[/code] <p /> There you have it. A very simple example. <p /> Now if you want to send structured data, you may want to try using the <br />JSON library to serialize the data you want to send.
